{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="relative overflow-hidden">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
        <div class="text-center">
            <div class="inline-flex items-center bg-volt-yellow/10 border border-volt-yellow/20 rounded-full px-4 py-2 mb-8">
                <span class="text-volt-yellow font-semibold">‚ö° Live Demo - See HTMX in Action</span>
            </div>

            <h1 class="text-6xl md:text-8xl font-extrabold mb-6">
                Interactive
                <span class="text-transparent bg-clip-text bg-linear-to-r from-volt-yellow to-yellow-200">Demo</span>
            </h1>

            <p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-4xl mx-auto">
                Experience the power of <span class="text-volt-yellow font-semibold">HTMX + Volt</span>.
                Dynamic updates, seamless interactions, blazing performance.
            </p>
        </div>
    </div>
</section>

<!-- Interactive Demo Section -->
<section class="py-20 bg-black/20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-2 gap-12">
            <!-- Real-time Search Demo -->
            <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-8 border border-gray-700/50">
                <h3 class="text-2xl font-bold mb-6 flex items-center">
                    <span class="text-volt-yellow mr-3">üîç</span>
                    Real-time Search
                </h3>
                
                <div class="space-y-4">
                    <input 
                        type="search"
                        name="query"
                        placeholder="Search for programming languages..."
                        class="w-full bg-black/30 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-volt-yellow focus:outline-none transition-colors"
                        hx-get="/demo/languages/search"
                        hx-trigger="input changed delay:100ms, keyup[key=='Enter']"
                        hx-target="#search-results">
                    {% block programming_language_list %}
                    {% if searching %}
                    {% if programming_languages %}
                    {% for language in programming_languages %}
                    <div class="flex items-center justify-between bg-black/20 rounded-lg px-4 py-3 border border-gray-700/50 hover:border-volt-yellow/50 transition-colors">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 {{ language.bg_colour }} rounded-full flex items-center justify-center">
                                <span class="{{ language.text_colour }} text-sm font-bold">{{ language.abbrev }}</span>
                            </div>
                            <div>
                                <div class="font-semibold text-white">{{ language.name }}</div>
                                <div class="text-sm text-gray-400">{{ language.description }}</div>
                            </div>
                        </div>
                        <div class="{{ language.text_colour }} text-sm font-medium">{{ language.category }}</div>
                    </div>
                    {% endfor %}
                    {% else %}
                    <div class="text-center text-gray-400 py-8"><div class="text-4xl mb-4">üòî</div><p>No languages found</p></div>
                    {% endif %}
                    {% else %}
                    <div id="search-results" class="min-h-[200px] space-y-2">
                        <!-- Initial content -->
                        <div class="text-center text-gray-400 py-8">
                            <div class="text-4xl mb-4">üîç</div>
                            <p>Start typing to see real-time search results</p>
                        </div>
                    </div>
                    {% endif %}
                    {% endblock programming_language_list %}
                </div>
            </div>

            <!-- Task Manager Demo -->
            <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-8 border border-gray-700/50">
                <h3 class="text-2xl font-bold mb-6 flex items-center">
                    <span class="text-volt-yellow mr-3">‚úÖ</span>
                    Task Manager
                </h3>
                
                <form hx-post="/demo/add-task" hx-target="#task-list" hx-swap="beforeend" class="mb-6"
                    hx-on::after-request="if(event.detail.successful) this.reset()"
                    >
                    <div class="flex gap-2">
                        <input 
                            type="text" 
                            name="task"
                            placeholder="Add a new task..."
                            class="flex-1 bg-black/30 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-volt-yellow focus:outline-none transition-colors"
                            required
                        >
                        <button 
                            type="submit"
                            class="bg-volt-yellow text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-300 transition-colors glow-effect cursor-pointer"
                        >
                            Add
                        </button>
                    </div>
                </form>
                
                <div id="task-list" class="space-y-2 max-h-64 overflow-y-auto">
                    {% block task_list %}
                    {% for task in tasks %}
                    <div class="flex items-center justify-between bg-black/20 rounded-lg px-4 py-3 border border-gray-700/50">
                        <span class="text-gray-300">{{ task|e }}</span>
                        <button 
                            hx-target="closest div"
                            hx-delete="/demo/task/delete" 
                            hx-swap="delete"
                            class="text-red-400 hover:text-red-300 transition-colors"
                        >
                            ‚úï
                        </button>
                    </div>
                    {% endfor %}
                    {% endblock task_list %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Counter & Forms Section -->
<section class="py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Counter Demo -->
            <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-8 border border-gray-700/50 card-hover">
                <h3 class="text-2xl font-bold mb-6 flex items-center">
                    <span class="text-volt-yellow mr-3">üî¢</span>
                    Counter
                </h3>
                
                <div id="counter" class="text-center" hx-vals='js:{value: this.getElementsByClassName("counter-val")[0].innerHTML}'>
                    <div id="counter-val" class="counter-val text-5xl font-bold text-volt-yellow mb-6">{% block counter %}{{ value }}{% endblock counter %}</div>
                    <div class="flex justify-center gap-3">
                        <button 
                            hx-post="/demo/counter/decrement"
                            hx-target="#counter-val"
                            hx-swap="innerHTML"
                            class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-500 transition-colors cursor-pointer"
                        >
                            -
                        </button>
                        <button 
                            hx-post="/demo/counter/increment"
                            hx-target="#counter-val"
                            hx-swap="innerHTML"
                            class="bg-volt-yellow text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-300 transition-colors cursor-pointer"
                        >
                            +
                        </button>
                    </div>
                    <button 
                        hx-post="/demo/counter/reset"
                        hx-target="#counter-val"
                        hx-swap="innerHTML"
                        class="mt-3 text-gray-400 hover:text-white transition-colors text-sm cursor-pointer"
                    >
                        Reset
                    </button>
                </div>
            </div>

            <!-- Live Chat Demo -->
            <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-8 border border-gray-700/50 card-hover">
                <h3 class="text-2xl font-bold mb-6 flex items-center">
                    <span class="text-volt-yellow mr-3">üí¨</span>
                    Live Chat
                </h3>

                <div id="chat-messages" class="bg-black/20 rounded-lg p-4 h-40 overflow-y-auto mb-4 space-y-2">
                    {% block chat_messages %}
                    {% for chat in chat_messages %}
                    {% if chat.sender == "me" %}
                    <div class="flex justify-end mb-2">
                        <div class="bg-volt-yellow text-black rounded-lg px-3 py-2 max-w-xs break-words">
                            <div class="text-sm font-medium">{{ chat.message }}</div>
                            <div class="text-xs opacity-75 mt-1">{{ chat.time | nice_time }}</div>
                        </div>
                    </div>
                    {% else %}
                    <div class="flex justify-start mb-2">
                        <div class="bg-gray-700 text-white rounded-lg px-3 py-2 max-w-xs break-words">
                            <div class="text-sm">{{ chat.message }}</div>
                            <div class="text-xs text-gray-400 mt-1">{{ chat.time | nice_time }}</div>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                    {% endblock chat_messages %}
                </div>
                
                <form hx-post="/demo/chat" hx-target="#chat-messages" hx-swap="beforeend scroll:bottom" hx-on::after-request="this.reset()">
                    <div class="flex gap-2">
                        <input 
                            type="text" 
                            name="message"
                            placeholder="Type a message..."
                            class="flex-1 bg-black/30 border border-gray-600 rounded px-3 py-2 text-white placeholder-gray-400 focus:border-volt-yellow focus:outline-none transition-colors text-sm"
                            required
                        >
                        <button 
                            type="submit"
                            class="bg-volt-yellow text-black px-4 py-2 rounded font-semibold hover:bg-yellow-300 transition-colors text-sm cursor-pointer"
                        >
                            Send
                        </button>
                    </div>
                </form>
            </div>

            <!-- Dynamic Form Demo -->
            <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-8 border border-gray-700/50 card-hover">
                <h3 class="text-2xl font-bold mb-6 flex items-center">
                    <span class="text-volt-yellow mr-3">üìù</span>
                    Dynamic Form
                </h3>
                
                <form class="space-y-4">
                    <select 
                        name="category"
                        hx-get="/demo/form/fields"
                        hx-target="#dynamic-fields"
                        hx-trigger="change"
                        class="w-full bg-black/30 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-volt-yellow focus:outline-none transition-colors"
                    >
                        <option value="">Select a category...</option>
                        <option value="user">User Profile</option>
                        <option value="product">Product Info</option>
                        <option value="feedback">Feedback</option>
                    </select>
                    
                    <div id="dynamic-fields" class="space-y-3">
                        <div class="text-center text-gray-400 py-4">
                            <div class="text-2xl mb-2">üìã</div>
                            <p class="text-sm">Select a category to see dynamic fields</p>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<!-- Progress & Loading States -->
<section class="py-20 bg-black/20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold mb-4">Loading States & Progress</h2>
            <p class="text-xl text-gray-300">See how Volt handles async operations gracefully</p>
        </div>
        
        <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
            <!-- File Upload Progress -->
            <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-8 border border-gray-700/50">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-volt-yellow mr-3">üì§</span>
                    Simulated Upload
                </h3>
                
                <button 
                    hx-post="/demo/upload/start"
                    hx-target="#upload-progress"
                    hx-swap="innerHTML"
                    class="w-full bg-volt-yellow text-black py-3 rounded-lg font-semibold hover:bg-yellow-300 transition-colors glow-effect mb-4"
                >
                    Start Upload Simulation
                </button>
                
                <div id="upload-progress" class="text-center text-gray-400">
                    Ready to simulate upload progress
                </div>
            </div>

            <!-- Data Processing -->
            <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 rounded-2xl p-8 border border-gray-700/50">
                <h3 class="text-xl font-bold mb-6 flex items-center">
                    <span class="text-volt-yellow mr-3">‚öôÔ∏è</span>
                    Data Processing
                </h3>
                
                <button 
                    hx-post="/demo/process/start"
                    hx-target="#process-status"
                    hx-swap="innerHTML"
                    class="w-full bg-volt-yellow text-black py-3 rounded-lg font-semibold hover:bg-yellow-300 transition-colors glow-effect mb-4"
                >
                    Process Data
                </button>
                
                <div id="process-status" class="text-center text-gray-400">
                    Click to start data processing simulation
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Code Examples -->
<section class="py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-bold mb-4">The Code Behind the Magic</h2>
            <p class="text-xl text-gray-300">Simple Python handlers powering dynamic interactions</p>
        </div>

        <div class="max-w-5xl mx-auto grid md:grid-cols-2 gap-8">
            <!-- Python Handler Example -->
            <div class="code-block rounded-2xl p-6 overflow-x-auto">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex space-x-2">
                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    </div>
                    <span class="text-gray-400 text-sm">handlers.py</span>
                </div>

                <pre class="text-sm">
                    <code class="text-gray-300">
<span class="text-yellow-400">@route</span>(<span class="text-green-300">"/demo/search"</span>, methods=[<span class="text-green-300">"POST"</span>])
<span class="text-purple-400">def</span> <span class="text-blue-300">search_handler</span>(request: HttpRequest):
    query = request.form_data.get(<span class="text-green-300">'search'</span>, <span class="text-green-300">''</span>)
    
    <span class="text-gray-500"># Simulate search logic</span>
    results = search_database(query)
    
    <span class="text-purple-400">return</span> render_template(
        <span class="text-green-300">'search_results.html'</span>, 
        results=results
    )

<span class="text-yellow-400">@route</span>(<span class="text-green-300">"/demo/counter/increment"</span>)
<span class="text-purple-400">def</span> <span class="text-blue-300">increment</span>(request: HttpRequest):
    <span class="text-purple-400">global</span> counter
    counter += <span class="text-orange-400">1</span>
    <span class="text-purple-400">return</span> HttpResponse(<span class="text-green-300">f"{counter}"</span>)
                    </code>
                </pre>
            </div>

            <!-- HTMX Template Example -->
            <div class="code-block rounded-2xl p-6 overflow-x-auto">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex space-x-2">
                        <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                        <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                    </div>
                    <span class="text-gray-400 text-sm">template.html</span>
                </div>

                <pre class="text-sm">
                    <code class="text-gray-300">
<span class="text-red-400">&lt;input</span> 
    <span class="text-blue-300">type</span>=<span class="text-green-300">"text"</span>
    <span class="text-blue-300">hx-post</span>=<span class="text-green-300">"/demo/search"</span>
    <span class="text-blue-300">hx-trigger</span>=<span class="text-green-300">"keyup changed delay:300ms"</span>
    <span class="text-blue-300">hx-target</span>=<span class="text-green-300">"#results"</span>
<span class="text-red-400">/&gt;</span>

<span class="text-red-400">&lt;button</span>
    <span class="text-blue-300">hx-post</span>=<span class="text-green-300">"/demo/counter/increment"</span>
    <span class="text-blue-3000">hx-target</span>=<span class="text-green-300">"#counter-value"</span>
    <span class="text-blue-300">hx-swap</span>=<span class="text-green-300">"innerHTML"</span>
<span class="text-red-400">&gt;</span>
    Increment
<span class="text-red-400">&lt;/button&gt;</span>

<span class="text-gray-500">&lt;!-- That's it! No JavaScript needed --&gt;</span>
                    </code>
                </pre>
            </div>
        </div>
    </div>
</section>

<!-- Performance Benefits -->
<section class="py-20 bg-volt-yellow/5 border-y border-volt-yellow/20">
    <div class="max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8">
        <h2 class="text-4xl md:text-5xl font-bold mb-6">HTMX + Volt = üöÄ</h2>
        <p class="text-xl text-gray-300 mb-8">
            Experience the perfect marriage of <span class="text-volt-yellow font-semibold">hypermedia</span> 
            and <span class="text-volt-yellow font-semibold">native performance</span>
        </p>
        
        <div class="grid md:grid-cols-3 gap-8 mb-8">
            <div>
                <div class="text-3xl font-bold text-volt-yellow mb-2">0ms</div>
                <div class="text-gray-300">JavaScript bundle size</div>
            </div>
            <div>
                <div class="text-3xl font-bold text-volt-yellow mb-2">&lt;50KB</div>
                <div class="text-gray-300">HTMX library size</div>
            </div>
            <div>
                <div class="text-3xl font-bold text-volt-yellow mb-2">‚àûx</div>
                <div class="text-gray-300">Simpler than SPA frameworks</div>
            </div>
        </div>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a href="/"
                class="bg-volt-yellow text-black px-8 py-4 rounded-lg font-bold text-lg hover:bg-yellow-300 transition-all glow-effect">
                ‚Üê Back to Home
            </a>
            <a href="https://github.com/trkl-dev/volt"
                class="border-2 border-volt-yellow text-volt-yellow px-8 py-4 rounded-lg font-bold text-lg hover:bg-volt-yellow hover:text-black transition-all">
                Build with Volt
            </a>
        </div>
    </div>
</section>

{% endblock %}
